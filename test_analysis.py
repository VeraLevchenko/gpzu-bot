"""
–¢–µ—Å—Ç –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Å –ü–†–ê–í–ò–õ–¨–ù–´–ú–ò –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏
"""
from models.gp_data import GPData, ParcelInfo, ApplicationInfo
from utils.spatial_analysis import perform_spatial_analysis

test_parcel = GPData()

test_parcel.application = ApplicationInfo(
    number="12345",
    date="2025-01-15",
    applicant="–¢–µ—Å—Ç–æ–≤—ã–π –∑–∞—è–≤–∏—Ç–µ–ª—å",
    purpose="–¥–ª—è —Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–∞ –∂–∏–ª–æ–≥–æ –¥–æ–º–∞"
)

# –ò–°–ü–†–ê–í–õ–ï–ù–û: X –∏ Y –ø–æ–º–µ–Ω—è–ª–∏ –º–µ—Å—Ç–∞–º–∏
test_parcel.parcel = ParcelInfo(
    cadnum="42:30:0123456:789",
    address="–≥. –ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫, —Ç–µ—Å—Ç–æ–≤—ã–π –∞–¥—Ä–µ—Å",
    area="1620",
    region="–ö–µ–º–µ—Ä–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å ‚Äì –ö—É–∑–±–∞—Å—Å",
    municipality="–ù–æ–≤–æ–∫—É–∑–Ω–µ—Ü–∫–∏–π –≥–æ—Ä–æ–¥—Å–∫–æ–π –æ–∫—Ä—É–≥",
    coordinates=[
        {"num": "1", "x": "2217349.09", "y": "448166.88"},  # X –∏ Y –ø–æ–º–µ–Ω—è–ª–∏!
        {"num": "2", "x": "2217352.99", "y": "448164.65"},
        {"num": "3", "x": "2217356.06", "y": "448170.01"},
        {"num": "4", "x": "2217356.34", "y": "448170.51"},
        {"num": "5", "x": "2217352.44", "y": "448172.74"},
        {"num": "6", "x": "2217352.10", "y": "448172.14"},
        {"num": "1", "x": "2217349.09", "y": "448166.88"},
    ]
)

print("üîç –ó–∞–ø—É—Å–∫ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞...")
print("üìç –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —É—á–∞—Å—Ç–∫–∞ (–ò–°–ü–†–ê–í–õ–ï–ù–û): X=2217349, Y=448166")
print("="*60)

try:
    result = perform_spatial_analysis(test_parcel)
    
    print("\n" + "="*60)
    print("üìä –†–ï–ó–£–õ–¨–¢–ê–¢–´ –ê–ù–ê–õ–ò–ó–ê:")
    print("="*60)
    print(result.get_summary())
    
except Exception as e:
    print(f"\n‚ùå –û–®–ò–ë–ö–ê: {e}")
    import traceback
    traceback.print_exc()
